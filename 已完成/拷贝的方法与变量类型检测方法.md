## 拷贝的方式及变量类型检测

### 拷贝的四种方式

**拷贝分为深拷贝和浅拷贝，浅拷贝只能拷贝基本基本，深拷贝可以拷贝引用类型**

**1.for..in...(浅拷贝，且要拷贝原型上的属性)**

```javascript
let user1 = {
	name: '小源',
	age: 10,
	like: ['读书', '打游戏']
}
let user2={};//定义一个空变量
for (let key in user1) { // 也会遍历原型链上的属性
	if (user1.hasOwnProperty(key)) { // 判断属性是否是对象自身的，而不是原型链上的
		user2[key] = user1[key]//进行浅拷贝
	}
}
```



**2.Object.assign()(浅拷贝，但不会变量原型上的属性)**

```javascript
let user1 = {
	name: '小源',
	age: 10,
	like: ['读书', '打游戏']
}
let user2=Object.assign({},user1);//浅拷贝
```



**3.JSON.parse()和JSON.stringfy()(深拷贝，无法拷贝函数，只能拷贝第一层的引用类型)**

```javascript
let user1 = {
	name: '小源',
	age: 10,
	like: ['读书', '打游戏']
}
let str = JSON.stringify(user1) // 1.先将旧对象转化为字符串
let user4 = JSON.parse(str) // 2.再将字符串解析为新对象
```

**4.ES6解构**

```
let user={
	name:'小貂禅',
	age:18,
	sex:'女'
}
let user2={...user}
```

**5.完美拷贝只能用lodash**



### 变量类型检测

**1.基本类型检测typeof**

```javascript
typeof('小源'); // 'string'
typeof(false); // 'boolean'
typeof(22) // 'number'
typeof(a) // 'undefined'
typeof(null) // 'object'
typeof({ name: '小源' }) // 'object'
typeof([1, 2, 3, 4]) // 'object'
typeof(function() {}) // 'function'
```

**2.引用类型检测instanceof**

```javascript
let variable
variable = { name: '小源' }
variable instanceof Object // true

variable = [1, 2, 3, 4]
variable instanceof Array // true

variable = function() {}
variable instanceof Function // true

console.log([] instanceof Array); // true
console.log([] instanceof Object); // true
//（1）检测某个实例是否属于某个类；
//（2）判断时，匹配到所有出现在实例原型链上的类都会返回true；
```

**3.检测数组的一个方法Array.isArray**

```javascript
Array.isArray([1,2,3]) // true
```

**4.完美检测变量类型Object.prototype.toString.call()**

```javascript
const toString = Object.prototype.toString
// 判断简单数据类型
console.log(toString.call(10)); // '[object Number]'
console.log(toString.call('小源')); // '[object String]'
console.log(toString.call(true)); // '[object Boolean]'
console.log(toString.call(null)); // '[object Null]'
console.log(toString.call(undefined)); // '[object Undefined]'
console.log(toString.call(function() {})) // [object Function]
```





