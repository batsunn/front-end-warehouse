"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(M){var h={};h.fileapi=void 0!==M("<input type='file'/>").get(0).files,h.formdata=void 0!==window.FormData;var F=!!M.fn.prop;function r(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),M(e.target).ajaxSubmit(t))}function a(e){var t=e.target,r=M(t);if(!r.is("[type=submit],[type=image]")){var a=r.closest("[type=submit]");if(0===a.length)return;t=a[0]}var n=this;"image"==(n.clk=t).type&&(void 0!==e.offsetX?(n.clk_x=e.offsetX,n.clk_y=e.offsetY):"function"==typeof M.fn.offset?(r=r.offset(),n.clk_x=e.pageX-r.left,n.clk_y=e.pageY-r.top):(n.clk_x=e.pageX-t.offsetLeft,n.clk_y=e.pageY-t.offsetTop)),setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function O(){var e;M.fn.ajaxSubmit.debug&&(e="[jquery.form] "+Array.prototype.join.call(arguments,""),window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e))}M.fn.attr2=function(){if(!F)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},M.fn.ajaxSubmit=function(D){if(!this.length)return O("ajaxSubmit: skipping submit process - no element selected"),this;var A,E=this;"function"==typeof D?D={success:D}:void 0===D&&(D={}),A=D.type||this.attr2("method"),a=(a=(a="string"==typeof(t=D.url||this.attr2("action"))?M.trim(t):"")||window.location.href||"")&&(a.match(/^([^#]+)/)||[])[1],D=M.extend(!0,{url:a,success:M.ajaxSettings.success,type:A||M.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},D);var e={};if(this.trigger("form-pre-serialize",[this,D,e]),e.veto)return O("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(D.beforeSerialize&&!1===D.beforeSerialize(this,D))return O("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var t=D.traditional;void 0===t&&(t=M.ajaxSettings.traditional);var L=[],r=this.formToArray(D.semantic,L);if(D.data&&(D.extraData=D.data,u=M.param(D.data,t)),D.beforeSubmit&&!1===D.beforeSubmit(r,this,D))return O("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[r,this,D,e]),e.veto)return O("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var a=M.param(r,t);u&&(a=a?a+"&"+u:u),"GET"==D.type.toUpperCase()?(D.url+=(0<=D.url.indexOf("?")?"&":"?")+a,D.data=null):D.data=a;var n,o,i,s=[];D.resetForm&&s.push(function(){E.resetForm()}),D.clearForm&&s.push(function(){E.clearForm(D.includeHidden)}),!D.dataType&&D.target?(n=D.success||function(){},s.push(function(e){var t=D.replaceTarget?"replaceWith":"html";M(D.target)[t](e).each(n,arguments)})):D.success&&s.push(D.success),D.success=function(e,t,r){for(var a=D.context||this,n=0,o=s.length;n<o;n++)s[n].apply(a,[e,t,r||E,E])},D.error&&(o=D.error,D.error=function(e,t,r){var a=D.context||this;o.apply(a,[e,t,r,E])}),D.complete&&(i=D.complete,D.complete=function(e,t){var r=D.context||this;i.apply(r,[e,t,E])});var e=0<M("input[type=file]:enabled",this).filter(function(){return""!==M(this).val()}).length,t="multipart/form-data",u=E.attr("enctype")==t||E.attr("encoding")==t,a=h.fileapi&&h.formdata;O("fileAPI :"+a);var c,t=(e||u)&&!a;!1!==D.iframe&&(D.iframe||t)?D.closeKeepAlive?M.get(D.closeKeepAlive,function(){c=f(r)}):c=f(r):c=(e||u)&&a?function(e){for(var r=new FormData,t=0;t<e.length;t++)r.append(e[t].name,e[t].value);if(D.extraData){var a=function(e){var t,r,a=M.param(e,D.traditional).split("&"),n=a.length,o=[];for(t=0;t<n;t++)a[t]=a[t].replace(/\+/g," "),r=a[t].split("="),o.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return o}(D.extraData);for(t=0;t<a.length;t++)a[t]&&r.append(a[t][0],a[t][1])}D.data=null;var n=M.extend(!0,{},M.ajaxSettings,D,{contentType:!1,processData:!1,cache:!1,type:A||"POST"});D.uploadProgress&&(n.xhr=function(){var e=M.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var t=0,r=e.loaded||e.position,a=e.total;e.lengthComputable&&(t=Math.ceil(r/a*100)),D.uploadProgress(e,r,a,t)},!1),e});n.data=null;var o=n.beforeSend;return n.beforeSend=function(e,t){D.formData?t.data=D.formData:t.data=r,o&&o.call(this,e,t)},M.ajax(n)}(r):M.ajax(D),E.removeData("jqxhr").data("jqxhr",c);for(var l=0;l<L.length;l++)L[l]=null;return this.trigger("form-submit-notify",[this,D]),this;function f(e){var t,r,i,s,o,u,c,l,f,m,p=E[0],d=M.Deferred();if(d.abort=function(e){l.abort(e)},e)for(r=0;r<L.length;r++)t=M(L[r]),F?t.prop("disabled",!1):t.removeAttr("disabled");if((i=M.extend(!0,{},M.ajaxSettings,D)).context=i.context||i,o="jqFormIO"+(new Date).getTime(),i.iframeTarget?(a=(u=M(i.iframeTarget)).attr2("name"))?o=a:u.attr2("name",o):(u=M('<iframe name="'+o+'" src="'+i.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),c=u[0],l={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var t="timeout"===e?"timeout":"aborted";O("aborting upload... "+t),this.aborted=1;try{c.contentWindow.document.execCommand&&c.contentWindow.document.execCommand("Stop")}catch(e){}u.attr("src",i.iframeSrc),l.error=t,i.error&&i.error.call(i.context,l,t,e),s&&M.event.trigger("ajaxError",[l,i,t]),i.complete&&i.complete.call(i.context,l,t)}},(s=i.global)&&0==M.active++&&M.event.trigger("ajaxStart"),s&&M.event.trigger("ajaxSend",[l,i]),i.beforeSend&&!1===i.beforeSend.call(i.context,l,i))return i.global&&M.active--,d.reject(),d;if(l.aborted)return d.reject(),d;(e=p.clk)&&(a=e.name)&&!e.disabled&&(i.extraData=i.extraData||{},i.extraData[a]=e.value,"image"==e.type&&(i.extraData[a+".x"]=p.clk_x,i.extraData[a+".y"]=p.clk_y));var h=1,v=2;function g(t){var r=null;try{t.contentWindow&&(r=t.contentWindow.document)}catch(e){O("cannot get iframe.contentWindow document: "+e)}if(r)return r;try{r=t.contentDocument||t.document}catch(e){O("cannot get iframe.contentDocument: "+e),r=t.document}return r}var e=M("meta[name=csrf-token]").attr("content"),a=M("meta[name=csrf-param]").attr("content");function n(){var e=E.attr2("target"),t=E.attr2("action"),r=E.attr("enctype")||E.attr("encoding")||"multipart/form-data";p.setAttribute("target",o),A&&!/post/i.test(A)||p.setAttribute("method","POST"),t!=i.url&&p.setAttribute("action",i.url),i.skipEncodingOverride||A&&!/post/i.test(A)||E.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),i.timeout&&(m=setTimeout(function(){f=!0,j(h)},i.timeout));var a=[];try{if(i.extraData)for(var n in i.extraData)i.extraData.hasOwnProperty(n)&&(M.isPlainObject(i.extraData[n])&&i.extraData[n].hasOwnProperty("name")&&i.extraData[n].hasOwnProperty("value")?a.push(M('<input type="hidden" name="'+i.extraData[n].name+'">').val(i.extraData[n].value).appendTo(p)[0]):a.push(M('<input type="hidden" name="'+n+'">').val(i.extraData[n]).appendTo(p)[0]));i.iframeTarget||u.appendTo("body"),c.attachEvent?c.attachEvent("onload",j):c.addEventListener("load",j,!1),setTimeout(function e(){try{var t=g(c).readyState;O("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){O("Server abort: ",e," (",e.name,")"),j(v),m&&clearTimeout(m),m=void 0}},15);try{p.submit()}catch(e){document.createElement("form").submit.apply(p)}}finally{p.setAttribute("action",t),p.setAttribute("enctype",r),e?p.setAttribute("target",e):E.removeAttr("target"),M(a).remove()}}a&&e&&(i.extraData=i.extraData||{},i.extraData[a]=e),i.forceSync?n():setTimeout(n,10);var x,y,b,T=50;function j(e){if(!l.aborted&&!b){if((y=g(c))||(O("cannot access response document"),e=v),e===h&&l)return l.abort("timeout"),void d.reject(l,"timeout");if(e==v&&l)return l.abort("server abort"),void d.reject(l,"error","server abort");if(y&&y.location.href!=i.iframeSrc||f){c.detachEvent?c.detachEvent("onload",j):c.removeEventListener("load",j,!1);var t,r="success";try{if(f)throw"timeout";var a="xml"==i.dataType||y.XMLDocument||M.isXMLDoc(y);if(O("isXml="+a),!a&&window.opera&&(null===y.body||!y.body.innerHTML)&&--T)return O("requeing onLoad callback, DOM not available"),void setTimeout(j,250);var n=y.body||y.documentElement;l.responseText=n?n.innerHTML:null,l.responseXML=y.XMLDocument||y,a&&(i.dataType="xml"),l.getResponseHeader=function(e){return{"content-type":i.dataType}[e.toLowerCase()]},n&&(l.status=Number(n.getAttribute("status"))||l.status,l.statusText=n.getAttribute("statusText")||l.statusText);var o=(i.dataType||"").toLowerCase(),a=/(json|script|text)/.test(o);a||i.textarea?(n=y.getElementsByTagName("textarea")[0])?(l.responseText=n.value,l.status=Number(n.getAttribute("status"))||l.status,l.statusText=n.getAttribute("statusText")||l.statusText):a&&(n=y.getElementsByTagName("pre")[0],a=y.getElementsByTagName("body")[0],n?l.responseText=n.textContent||n.innerText:a&&(l.responseText=a.textContent||a.innerText)):"xml"==o&&!l.responseXML&&l.responseText&&(l.responseXML=S(l.responseText));try{x=k(l,o,i)}catch(e){r="parsererror",l.error=t=e||r}}catch(e){O("error caught: ",e),r="error",l.error=t=e||r}l.aborted&&(O("upload aborted"),r=null),l.status&&(r=200<=l.status&&l.status<300||304===l.status?"success":"error"),"success"===r?(i.success&&i.success.call(i.context,x,"success",l),d.resolve(l.responseText,"success",l),s&&M.event.trigger("ajaxSuccess",[l,i])):r&&(void 0===t&&(t=l.statusText),i.error&&i.error.call(i.context,l,r,t),d.reject(l,"error",t),s&&M.event.trigger("ajaxError",[l,i,t])),s&&M.event.trigger("ajaxComplete",[l,i]),s&&!--M.active&&M.event.trigger("ajaxStop"),i.complete&&i.complete.call(i.context,l,r),b=!0,i.timeout&&clearTimeout(m),setTimeout(function(){i.iframeTarget?u.attr("src",i.iframeSrc):u.remove(),l.responseXML=null},100)}}}var S=M.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},w=M.parseJSON||function(e){return window.eval("("+e+")")},k=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n="xml"===t||!t&&0<=a.indexOf("xml"),e=n?e.responseXML:e.responseText;return n&&"parsererror"===e.documentElement.nodeName&&M.error&&M.error("parsererror"),r&&r.dataFilter&&(e=r.dataFilter(e,t)),"string"==typeof e&&("json"===t||!t&&0<=a.indexOf("json")?e=w(e):("script"===t||!t&&0<=a.indexOf("javascript"))&&M.globalEval(e)),e};return d}},M.fn.ajaxForm=function(e){if((e=e||{}).delegation=e.delegation&&M.isFunction(M.fn.on),e.delegation||0!==this.length)return e.delegation?(M(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,e,r).on("click.form-plugin",this.selector,e,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,r).bind("click.form-plugin",e,a);var t={s:this.selector,c:this.context};return!M.isReady&&t.s?(O("DOM not ready, queuing ajaxForm"),M(function(){M(t.s,t.c).ajaxForm(e)})):O("terminating; zero elements found by selector"+(M.isReady?"":" (DOM not ready)")),this},M.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},M.fn.formToArray=function(e,t){var r=[];if(0===this.length)return r;var a,n,o,i,s,u,c,l,f=this[0],m=this.attr("id"),p=e?f.getElementsByTagName("*"):f.elements;if(p&&!/MSIE [678]/.test(navigator.userAgent)&&(p=M(p).get()),m&&(c=M(':input[form="'+m+'"]').get()).length&&(p=(p||[]).concat(c)),!p||!p.length)return r;for(a=0,s=p.length;a<s;a++)if((l=(i=p[a]).name)&&!i.disabled)if(e&&f.clk&&"image"==i.type)f.clk==i&&(r.push({name:l,value:M(i).val(),type:i.type}),r.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}));else if((o=M.fieldValue(i,!0))&&o.constructor==Array)for(t&&t.push(i),n=0,u=o.length;n<u;n++)r.push({name:l,value:o[n]});else if(h.fileapi&&"file"==i.type){t&&t.push(i);var d=i.files;if(d.length)for(n=0;n<d.length;n++)r.push({name:l,value:d[n],type:i.type});else r.push({name:l,value:"",type:i.type})}else null!=o&&(t&&t.push(i),r.push({name:l,value:o,type:i.type,required:i.required}));return e||!f.clk||(l=(c=(m=M(f.clk))[0]).name)&&!c.disabled&&"image"==c.type&&(r.push({name:l,value:m.val()}),r.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y})),r},M.fn.formSerialize=function(e){return M.param(this.formToArray(e))},M.fn.fieldSerialize=function(n){var o=[];return this.each(function(){var e=this.name;if(e){var t=M.fieldValue(this,n);if(t&&t.constructor==Array)for(var r=0,a=t.length;r<a;r++)o.push({name:e,value:t[r]});else null!=t&&o.push({name:this.name,value:t})}}),M.param(o)},M.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r<a;r++){var n=this[r],n=M.fieldValue(n,e);null==n||n.constructor==Array&&!n.length||(n.constructor==Array?M.merge(t,n):t.push(n))}return t},M.fieldValue=function(e,t){var r=e.name,a=e.type,n=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==n&&-1==e.selectedIndex))return null;if("select"!=n)return M(e).val();n=e.selectedIndex;if(n<0)return null;for(var o=[],i=e.options,s="select-one"==a,u=s?n+1:i.length,c=s?n:0;c<u;c++){var l=i[c];if(l.selected){var f=(f=l.value)||(l.attributes&&l.attributes.value&&!l.attributes.value.specified?l.text:l.value);if(s)return f;o.push(f)}}return o},M.fn.clearForm=function(e){return this.each(function(){M("input,select,textarea",this).clearFields(e)})},M.fn.clearFields=M.fn.clearInputs=function(r){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();a.test(e)||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t?this.selectedIndex=-1:"file"==e?/MSIE/.test(navigator.userAgent)?M(this).replaceWith(M(this).clone(!0)):M(this).val(""):r&&(!0===r&&/hidden/.test(e)||"string"==typeof r&&M(this).is(r))&&(this.value="")})},M.fn.resetForm=function(){return this.each(function(){"function"!=typeof this.reset&&("object"!=_typeof(this.reset)||this.reset.nodeType)||this.reset()})},M.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},M.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var e=this.type;"checkbox"==e||"radio"==e?this.checked=t:"option"==this.tagName.toLowerCase()&&(e=M(this).parent("select"),t&&e[0]&&"select-one"==e[0].type&&e.find("option").selected(!1),this.selected=t)})},M.fn.ajaxSubmit.debug=!1});